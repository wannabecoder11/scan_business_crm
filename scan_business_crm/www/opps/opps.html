{% extends "templates/web.html" %}
{% block page_content %}
<div class="container py-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="font-weight-bold">{{ title }}</h2>
        <span class="text-muted">{{ opportunities|length }} Projects Found</span>

    </div>
    <a href="/new-project-creation/new?email={{ frappe.session.user }}" class="btn btn-primary">
        <i class="fa fa-plus"></i> Start New Project
    </a>
    {% if not opportunities %}
    <div class="text-center py-5 bg-light rounded">
        <i class="fa fa-folder-open-o fa-3x mb-3 text-muted"></i>
        <p class="lead">No scan projects found linked to your account.</p>
    </div>
    {% else %}
    <div class="list-group shadow-sm">
        {% for opp in opportunities %}
        <a href="/cp/project_room?name={{ opp.name }}" 
           class="list-group-item list-group-item-action p-4 mb-2 border rounded shadow-sm hover-shadow">
            <div class="d-flex w-100 justify-content-between align-items-center">
                <div>
                    <h5 class="mb-1 font-weight-bold text-primary">{{ opp.title or opp.name }}</h5>
                    <p class="mb-1 text-muted small">
                        <i class="fa fa-calendar mr-1"></i> {{ frappe.utils.formatdate(opp.transaction_date) }} 
                        | <i class="fa fa-user mr-1"></i> {{ opp.customer_name or "Individual" }}
                    </p>
                </div>
                <div class="text-right">
                    <span class="badge badge-pill badge-status px-3 py-2" data-status="{{ opp.status }}">
                        {{ opp.status }}
                    </span>
                    <div class="mt-2 text-muted small">{{ opp.name }}</div>
                </div>
            </div>
        </a>
        {% endfor %}
    </div>
    {% endif %}
</div>

<style>
    .hover-shadow:hover {
        transform: translateY(-2px);
        transition: all 0.2s ease;
        border-color: #007bff !important;
    }
    .badge-status {
        font-size: 0.85rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }
</style>
{% endblock %}